spring.application.name=lightq

server.port=8080
logging.level.root=INFO

management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always

security.user.username=${SECURITY_USER_USERNAME:user}
security.user.password=${SECURITY_USER_PASSWORD:password}
security.admin.username=${SECURITY_ADMIN_USERNAME:admin}
security.admin.password=${SECURITY_ADMIN_PASSWORD:adminpassword}

spring.mongodb.uri=${MONGO_URI:mongodb://admin:password@localhost:27017/?authSource=admin}
spring.mongodb.database=${MONGO_DB:lightq-db}

spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=6379
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}

# Per-second rate limits for /queue endpoints
rate.limit.push-per-second=${RATE_LIMIT_PUSH_PER_SECOND:100}
rate.limit.pop-per-second=${RATE_LIMIT_POP_PER_SECOND:200}

lightq.message-allowed-to-fetch=50
lightq.persistence-duration-minutes=1440
lightq.cache-ttl-minutes=30

# Performance/scalability tuning knobs
# Max cached entries per consumer group (affects Redis LTRIM)
lightq.cache-max-entries-per-group=10000

# Bounded cache for ensured Mongo indexes
lightq.index-cache-max-groups=1000
lightq.index-cache-expire-minutes=60

# Async executor
lightq.core-pool-size=20
lightq.max-pool-size=50
lightq.queue-capacity=500
lightq.thread-name-prefix=DBDataUpdater-
lightq.allow-core-thread-timeout=true
lightq.await-termination-seconds=60

# Redis client timeouts (Lettuce)
lightq.redis-command-timeout-seconds=5
lightq.redis-shutdown-timeout-seconds=2

# Redis client pooling (Lettuce + commons-pool2)
lightq.redis-pool-max-total=${LIGHTQ_REDIS_POOL_MAX_TOTAL:64}
lightq.redis-pool-max-idle=${LIGHTQ_REDIS_POOL_MAX_IDLE:32}
lightq.redis-pool-min-idle=${LIGHTQ_REDIS_POOL_MIN_IDLE:8}
